{#
/**
 * @file
 * Default theme implementation for ContentRadar results.
 *
 * Available variables:
 * - results: Array of search results.
 * - pager: The pager element.
 * - total: Total number of results.
 * - search_term: The search term used.
 * - is_regex: Whether regex was used.
 * - langcode: The language code searched.
 * - grouped_results: Results grouped by content type.
 *
 * @ingroup themeable
 */
#}
<div class="content-radar-results">
  {% if total > 0 %}
    <div class="results-header">
      <div class="results-summary">
        <h3>
          <span class="results-icon">üîç</span>
          {{ 'Found @count matches for'|t({'@count': total}) }} 
          <strong>"{{ search_term }}"</strong>
        </h3>
        {% if langcode %}
          <span class="language-badge">{{ 'Language: @lang'|t({'@lang': langcode}) }}</span>
        {% endif %}
        {% if is_regex %}
          <span class="regex-badge">{{ 'RegEx'|t }}</span>
        {% endif %}
      </div>
      
      <div class="results-actions">
        {% if export_url %}
          <a href="{{ export_url }}" class="button button--small button--secondary" target="_blank">
            <span class="button-icon">üì•</span> {{ 'Export CSV'|t }}
          </a>
        {% endif %}
      </div>
    </div>
    
    <div class="results-content">
      <div class="results-table-wrapper">
        <table class="content-radar-table">
          <thead>
            <tr>
              <th>{{ 'Content Type'|t }}</th>
              <th>{{ 'ID'|t }}</th>
              <th>{{ 'Title'|t }}</th>
              <th>{{ 'Language'|t }}</th>
              <th>{{ 'Field'|t }}</th>
              <th>{{ 'Extract'|t }}</th>
              <th>{{ 'Status'|t }}</th>
              <th>{{ 'Modified'|t }}</th>
              <th>{{ 'Actions'|t }}</th>
            </tr>
          </thead>
          <tbody>
            {% if grouped_results %}
              {% set content_types = sort_alphabetically ? grouped_results|keys|sort : grouped_results|keys %}
              {% for content_type in content_types %}
                {% set items = grouped_results[content_type] %}
                {% for item in items %}
                  <tr class="{{ item.status ? '' : 'unpublished' }}{{ loop.first ? ' content-type-first' : '' }}">
                    <td class="content-type-cell">{{ content_type }}</td>
                    <td class="id-cell">#{{ item.id }}</td>
                    <td class="title-cell">
                      <a href="{{ item.view_url }}" target="_blank">{{ item.title }}</a>
                      {% if not item.status %}
                        <span class="status-badge unpublished">{{ 'Unpublished'|t }}</span>
                      {% endif %}
                    </td>
                    <td class="language-cell">{{ item.language }}</td>
                    <td class="field-cell">{{ item.field_label }}</td>
                    <td class="extract-cell">
                      <div class="extract-content">{{ item.extract|raw }}</div>
                      {% if item.usage and item.usage is not empty %}
                        <div class="usage-info">
                          <span class="usage-label">{{ 'Used in:'|t }}</span>
                          {% for usage in item.usage %}
                            <a href="{{ usage.url }}" target="_blank" class="usage-link">{{ usage.title }}</a>{% if not loop.last %}, {% endif %}
                          {% endfor %}
                        </div>
                      {% endif %}
                    </td>
                    <td class="status-cell">
                      <span class="status-indicator {{ item.status ? 'published' : 'unpublished' }}">
                        {{ item.status ? 'Published'|t : 'Unpublished'|t }}
                      </span>
                    </td>
                    <td class="date-cell">{{ item.changed }}</td>
                    <td class="actions-cell">
                      <div class="action-buttons">
                        <a href="{{ item.view_url }}" class="action-link view-link" target="_blank" title="{{ 'View'|t }}">
                          <span class="visually-hidden">{{ 'View'|t }}</span>
                          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 3C4.5 3 1.5 6 0.5 8C1.5 10 4.5 13 8 13C11.5 13 14.5 10 15.5 8C14.5 6 11.5 3 8 3ZM8 11C6.35 11 5 9.65 5 8C5 6.35 6.35 5 8 5C9.65 5 11 6.35 11 8C11 9.65 9.65 11 8 11ZM8 6.5C7.175 6.5 6.5 7.175 6.5 8C6.5 8.825 7.175 9.5 8 9.5C8.825 9.5 9.5 8.825 9.5 8C9.5 7.175 8.825 6.5 8 6.5Z"/>
                          </svg>
                        </a>
                        {% if item.edit_url %}
                          <a href="{{ item.edit_url }}" class="action-link edit-link" target="_blank" title="{{ 'Edit'|t }}">
                            <span class="visually-hidden">{{ 'Edit'|t }}</span>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                              <path d="M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z"/>
                            </svg>
                          </a>
                        {% endif %}
                      </div>
                    </td>
                  </tr>
                {% endfor %}
              {% endfor %}
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="results-footer">
      {{ pager }}
    </div>
  {% else %}
    <div class="no-results">
      <div class="no-results-icon">üîç‚ùå</div>
      <h3>{{ 'No results found'|t }}</h3>
      <p>{{ 'No matches found for "@term"'|t({'@term': search_term}) }}</p>
      {% if is_regex %}
        <p class="help-text">{{ 'Check your regular expression syntax and try again.'|t }}</p>
      {% endif %}
    </div>
  {% endif %}
</div>