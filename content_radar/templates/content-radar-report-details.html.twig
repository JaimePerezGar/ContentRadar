{#
/**
 * @file
 * Default theme implementation for Content Radar report details.
 *
 * Available variables:
 * - report: The report object.
 * - summary: Report summary information.
 * - details: Detailed information about affected entities.
 *
 * @ingroup themeable
 */
#}
{{ attach_library('core/drupal.ajax') }}
{{ attach_library('core/drupal.dialog.ajax') }}
<div class="content-radar-report-details">
  <div class="report-summary">
    <h2>{{ 'Report Summary'|t }}</h2>
    <dl>
      <dt>{{ 'Date'|t }}</dt>
      <dd>{{ summary.date }}</dd>
      
      <dt>{{ 'Performed by'|t }}</dt>
      <dd>{{ summary.user }}</dd>
      
      <dt>{{ 'Search term'|t }}</dt>
      <dd><code>{{ summary.search_term }}</code></dd>
      
      <dt>{{ 'Replace term'|t }}</dt>
      <dd><code>{{ summary.replace_term }}</code></dd>
      
      <dt>{{ 'Language'|t }}</dt>
      <dd>{{ summary.language }}</dd>
      
      <dt>{{ 'Use regex'|t }}</dt>
      <dd>{{ summary.use_regex }}</dd>
      
      <dt>{{ 'Total replacements'|t }}</dt>
      <dd><strong>{{ summary.total_replacements }}</strong></dd>
      
      <dt>{{ 'Entities affected'|t }}</dt>
      <dd><strong>{{ summary.entities_affected }}</strong></dd>
    </dl>
  </div>

  {% if details %}
    <div class="report-details">
      <h3>{{ 'Affected Entities'|t }}</h3>
      <table class="content-radar-report-table">
        <thead>
          <tr>
            <th>{{ 'Entity Type'|t }}</th>
            <th>{{ 'Entity'|t }}</th>
            <th>{{ 'Content Type'|t }}</th>
            <th>{{ 'Language'|t }}</th>
            <th>{{ 'Replacements'|t }}</th>
            <th>{{ 'Actions'|t }}</th>
          </tr>
        </thead>
        <tbody>
          {% for entity in details %}
            <tr>
              <td>
                <span class="entity-type-badge">{{ entity.entity_type }}</span>
              </td>
              <td>
                {% if entity.url %}
                  <a href="{{ entity.url }}" target="_blank">{{ entity.title }}</a>
                {% else %}
                  {{ entity.title }}
                {% endif %}
                <small>(ID: {{ entity.entity_id }})</small>
              </td>
              <td>{{ entity.type }}</td>
              <td>{{ entity.langcode }}</td>
              <td><strong>{{ entity.count }}</strong></td>
              <td>
                <ul class="links inline">
                  {% if entity.url %}
                    <li><a href="{{ entity.url }}" target="_blank">{{ 'View'|t }}</a></li>
                  {% endif %}
                  {% if entity.edit_url %}
                    <li><a href="{{ entity.edit_url }}" target="_blank">{{ 'Edit'|t }}</a></li>
                  {% endif %}
                </ul>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}

  <div class="report-actions">
    <a href="{{ back_url }}" class="button">{{ '‚Üê Back to reports'|t }}</a>
    <a href="{{ export_url }}" class="button button--small">{{ 'Export CSV'|t }}</a>
    {% if show_undo %}
      <a href="{{ undo_url }}" class="button button--danger">{{ 'Undo replacements'|t }}</a>
    {% endif %}
  </div>
</div>